<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta name="viewport" content="width = device-width, initial-scale = 1">
<title>"Notas de SO"</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.0/css/bootstrap.min.css" integrity="sha384-SI27wrMjH3ZZ89r4o+fGIJtnzkAnFs3E4qz9DIYioCQ5l9Rd/7UAa8DHcaL8jkWt" crossorigin="anonymous">
<style>
  .page-header{
    background-color: rgb(165, 28, 48);
    color: white;
    padding: 2em;
    text-align: center;
  }
  .jumbotron{
    width:70%;
    margin:auto;
  }
</style>
</head>
<body>
  <div class="container">
  <div class="page-header"><h3>Calculadora de Notas - ADS FATEC 3 SEM</h3></div><br>
  <div class="jumbotron">
    <div class="row">
      <div class="col-8"><select class="custom-select d-block w-100" id="option"></select></div>
      <div class="col-1"></div>
      <div class="col-3"><button id="bt" class="btn btn-dark btn-block" role="button">OK</button></div>
    </div>
  </div>
  <div id="entradas"></div><br>
  <div id="saidas">
    <div class="row" id="bts"></div>
    <div class="row" id="txt"></div>
  </div>
  </div>
  <script>
    var materias = ["Sistemas Operacionais", "Engenharia de Software", "Estrutura de dados"];
    var notas = [['P1 ','P2 ','PE ', 'PMU'],['P1','P2','PRO','PMU','LIS'],['P1','P2','LIS','APRES','PMU']];
    var nomes = [['PROVA 1','PROVA 2','TRABALHOS EXTRAS','PROVA MULTIDISCIPLINAR UNIFICADA'],['PROVA 1','PROVA 2','PROJETOS','PROVA MULTIDISCIPLINAR UNIFICADA','LISTAS'],['PROVA 1','PROVA 2','LISTAS','APRESENTAÇÃO','PROVA MULTIDISCIPLINAR UNIFICADA']];
    var pesos = [[1/3,2/3,1/10,1],[0.15,0.2,0.5,1,0.2],[0.3,0.4,0.15,0.15,1]];
    
    var index;
    
    //add opções de matérias para calcular a nota
    function addOption(txt){
      var option = document.createElement('option');
      option.appendChild(document.createTextNode(txt));
      return option;
    }
    materias.map(x => document.querySelector("#option").appendChild(addOption(x)));
    
    

    function c(tipo, classe, style){
        let objeto = document.createElement(tipo);
        objeto.className = classe;
        objeto.setAttribute('style',style);
        return objeto;
      }
    //recebe os valores adcionados, cria o botao calcular
    var valores = [];
    var ok = document.getElementById('bt').onclick = function(){
      document.querySelector('#entradas').innerHTML = "<br>";
      var saida = document.querySelector('#bts');
      saida.className = "jumbotron";
      saida.innerHTML = "<br>";

      index = document.querySelector('#option').selectedIndex;
      var card = c('card','card','width:70%; padding:1rem; margin:auto')
      let title = c('h4','card-title','');
      title.appendChild(document.createTextNode("Notas: "));
      card.appendChild(title);
      entradas.appendChild(card);

      for (var i=0; i<notas[index].length;i++){
        newEntrada(notas[index][i],nomes[index][i]);
      }
      let botao = c('button','btn btn-dark btn-block','');
      botao.setAttribute('role','button');
      botao.appendChild(document.createTextNode("Calcular"));
      saida.appendChild(botao);
      document.querySelector('#bts > button').onclick = function(){
        valores = [];
        document.querySelectorAll('input').forEach(x => valores.push(x.valueAsNumber));
      }

    }

    

    function newEntrada(nome, placeholder){
      
      //div card, div inputs, divbloco, span texto, input
      let classes = ["input-group mb-2","input-group-prepend","input-group-text","form-control"];
      let txt = c('span',classes[2],'');
      txt.appendChild(document.createTextNode(nome));
      let divspan = c('div',classes[1],'');
      divspan.appendChild(txt);
      let divall = c('div',classes[0],'');
      divall.appendChild(divspan);
      let input = c('input',classes[3],'');
      input.setAttribute('type','number');
      input.setAttribute('placeholder',placeholder);
      divall.appendChild(input);
      document.querySelector('.card').appendChild(divall);
    }

    function getmedia(){
      let total = 0;
      let inputs = document.querySelectorAll("input");
      let notasobtidas = [];
      inputs.forEach(function(x,y){notasobtidas.push(parseFloat(x.value));});
      console.log(notasobtidas);
      for(var i=0; i<notas[index].length;i++){
        total += notasobtidas[i] * pesos[index][i];
      }
      
      let p = document.querySelector("#saida > p");
      p.innerHTML = "";
      p.appendChild(document.createTextNode(total));
      
    }
    function br(place, n){
      for (var i=0;i<n;i++){
        place.appendChild(document.createElement('br'));
      }
    }
    
  </script>
  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.0/js/bootstrap.min.js" integrity="sha384-3qaqj0lc6sV/qpzrc1N5DC6i1VRn/HyX4qdPaiEFbn54VjQBEU341pvjz7Dv3n6P" crossorigin="anonymous"></script>
</body>
</html>
